<div class="container-fluid pt-3">
  <div class="d-flex justify-content-center pb-5">
    <div style="width: 100%;">
      <form #form="ngForm"  [formGroup]="cadastroForm" class="container-fluid ">
        <mat-card style="width: 100%;" class="mx-auto">
          <mat-card-header class="d-flex flex-column">
            <h1 class="text-center">
              Cadastro do produto
            </h1>
          </mat-card-header>
          <mat-card-content class="mt-3">
            <div class="row">
              <div class="col-3" *ngIf="!!cadastroProduto.id">
                <mat-form-field appearance="fill">
                  <mat-label>Identificador do produto</mat-label>
                  <input matInput placeholder="Identificador do produto" [value]="cadastroProduto.id" [readonly]="true" />
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-4">
                <mat-form-field>
                  <mat-label>Grupo de precificação</mat-label>
                  <mat-select placeholder="Selecione" formControlName="grupoPrecificacao" [compareWith]="grupoPrecificacaoEquals">
                    <mat-option *ngFor="let grupoPrecificacao of gruposPrecificacao" [value]="grupoPrecificacao">{{ grupoPrecificacao.descricao }}</mat-option>
                  </mat-select>
                  <mat-error *ngIf="cadastroForm.get('grupoPrecificacao').hasError('required')">
                    Informe o grupo de precificação
                  </mat-error>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <mat-form-field>
                  <mat-label>Título</mat-label>
                  <input matInput placeholder="Titulo" formControlName="titulo" />

                  <mat-error *ngIf="cadastroForm.get('titulo').hasError('required') && form.submitted">
                    Informe o título
                  </mat-error>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <mat-form-field>
                  <mat-label>Nome do autor</mat-label>
                  <input matInput placeholder="Autor" formControlName="autor" />

                  <mat-error *ngIf="cadastroForm.get('autor').hasError('required') && form.submitted">
                    Informe o nome do autor
                  </mat-error>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-4">
                <mat-form-field>
                  <mat-label>Categoria</mat-label>
                  <!-- <input matInput placeholder="Categoria" formControlName="categoria" /> -->
                  <mat-select formControlName="categorias" multiple [compareWith]="categoriaEquals">
                    <mat-option *ngFor="let categoria of categorias" [value]="categoria">{{categoria.descricao}}</mat-option>
                  </mat-select>

                  <mat-error *ngIf="cadastroForm.get('categorias').hasError('required') && form.submitted">
                    Informe a categoria
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-3">
                <mat-form-field>
                  <mat-label>Ano</mat-label>
                  <input matInput placeholder="Ano" formControlName="ano" mask="0000" />

                  <mat-error *ngIf="cadastroForm.get('ano').hasError('required') && form.submitted">
                    Informe o ano
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col">
                <mat-form-field>
                  <mat-label>Editora</mat-label>
                  <input matInput placeholder="Editora" formControlName="editora" />

                  <mat-error *ngIf="cadastroForm.get('editora').hasError('required') && form.submitted">
                    Informe a editora
                  </mat-error>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-4">
                <mat-form-field>
                  <mat-label>Edição</mat-label>
                  <input matInput placeholder="Edicao" formControlName="edicao" />

                  <mat-error *ngIf="cadastroForm.get('edicao').hasError('required') && form.submitted">
                    Informe a edição
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-4">
                <mat-form-field>
                  <mat-label>ISBN</mat-label>
                  <input matInput placeholder="Isbn" formControlName="isbn" />

                  <mat-error *ngIf="cadastroForm.get('isbn').hasError('required') && form.submitted">
                    Informe o ISBN
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-4">
                <mat-form-field>
                  <mat-label>Número de páginas</mat-label>
                  <input matInput placeholder="NumeroPaginas" formControlName="numeroPaginas" mask="9990" />

                  <mat-error *ngIf="cadastroForm.get('numeroPaginas').hasError('required') && form.submitted">
                    Informe o número de páginas
                  </mat-error>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <mat-form-field>
                  <mat-label>Sinopse</mat-label>
                  <textarea matInput placeholder="Sinopse" formControlName="sinopse" rows="4"></textarea>

                  <mat-error *ngIf="cadastroForm.get('sinopse').hasError('required') && form.submitted">
                    Informe a sinopse
                  </mat-error>
                </mat-form-field>
              </div>
            </div>

            <div class="row">
              <div class="col-6">
                <mat-form-field>
                  <mat-label>Código de barras</mat-label>
                  <input matInput placeholder="CodigoBarras" formControlName="codigoBarras" />

                  <mat-error *ngIf="cadastroForm.get('codigoBarras').hasError('required') && form.submitted">
                    Informe o código de barras
                  </mat-error>
                </mat-form-field>
              </div>
              <!-- <div class="col-6">
                <mat-form-field>
                  <mat-label>Valor</mat-label>
                  <input matInput placeholder="Valor" formControlName="valor" />

                </mat-form-field>
              </div> -->
            </div>

            <div class="row">
              <div class="col">
                <mat-label>Dimensões</mat-label>
              </div>
            </div>

            <div class="row">
              <div class="col-3">

                <mat-form-field>
                  <mat-label>Altura</mat-label>
                  <input matInput placeholder="Altura" formControlName="altura" mask="separator.2" thousandSeparator="." separatorLimit="10" />
                  <span matSuffix>cm</span>
                  <mat-error *ngIf="cadastroForm.get('altura').hasError('required') && form.submitted">
                    Informe a altura do produto
                  </mat-error>
                </mat-form-field>
              </div>
              
              <div class="col-3">
                <mat-form-field>
                  <mat-label>Largura</mat-label>
                  <input matInput placeholder="Largura" formControlName="largura" mask="separator.2" thousandSeparator="." separatorLimit="10" />
                  <span matSuffix>cm</span>
                  <mat-error *ngIf="cadastroForm.get('largura').hasError('required') && form.submitted">
                    Informe a largura do produto
                  </mat-error>
                </mat-form-field>
              </div>
              
              <div class="col-3">
                <mat-form-field>
                  <mat-label>Profundidade</mat-label>
                  <input matInput placeholder="Profundidade" formControlName="profundidade" mask="separator.2" thousandSeparator="." separatorLimit="10" />
                  <span matSuffix>cm</span>
                  <mat-error *ngIf="cadastroForm.get('profundidade').hasError('required') && form.submitted">
                    Informe a profundidade do produto
                  </mat-error>
                </mat-form-field>
              </div>
              
              <div class="col-3">
                <mat-form-field>
                  <mat-label>Peso</mat-label>
                  <input matInput placeholder="Peso" formControlName="peso" mask="separator.3" thousandSeparator="." separatorLimit="100" />
                  <span matSuffix>kg</span>
                  <mat-error *ngIf="cadastroForm.get('peso').hasError('required') && form.submitted">
                    Informe o peso do produto
                  </mat-error>
                </mat-form-field>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col">
                <mat-label>Selecione a imagem do livro</mat-label>
              </div>
            </div>

            <div class="row mb-4">
              <div class="col">
                <input type="file" accept="image/jpeg" (change)="selectFile($event.target)"/>
              </div>
            </div>

            <div class="row">
              <div class="col">
            <div class="image-box">
              <img mat-card-image [src]="imageBase64EncodedString" >
            </div>
          </div>
        </div>


          </mat-card-content>
          <mat-card-actions>
            <mat-divider></mat-divider>
            <div class="mt-3 row justify-content-end">
              <div class="col-2 d-flex justify-content-end">
                <button mat-flat-button color="warn" (click)="cancelar()">Cancelar</button>
              </div>

              <div class="col-3 d-flex justify-content-end">
                <button mat-flat-button color="primary" (click)="salvarProduto()">Salvar</button>
              </div>
            </div>
          </mat-card-actions>
        </mat-card>
      </form>
    </div>
  </div>
</div>
